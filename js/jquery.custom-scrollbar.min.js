(function(e){e.fn.customScrollbar=function(t,n){var r={skin:undefined,hScroll:false,vScroll:true,updateOnWindowResize:false,onCustomScroll:undefined};var i=function(t,n){this.$element=e(t);this.options=n;this.$element.addClass("scrollable");this.addSkinClass();this.addScrollBarComponents();if(this.options.vScroll)this.vScrollbar=new s(this,new u);if(this.options.hScroll)this.hScrollbar=new s(this,new o);this.$element.data("scrollable",this);if(window.jQueryCustomScrollbars==undefined)window.jQueryCustomScrollbars=[];this.addToScrollbarsHierarchy();this.initKeyboardScrolling();this.bindEvents()};i.prototype={addSkinClass:function(){if(typeof this.options.skin=="string")this.$element.addClass(this.options.skin)},addScrollBarComponents:function(){this.assignViewPort();if(this.$viewPort.length==0){this.$element.wrapInner('<div class="viewport" />');this.assignViewPort()}this.assignOverview();if(this.$overview.length==0){this.$viewPort.wrapInner('<div class="overview" />');this.assignOverview()}this.addScrollBar("vertical","prepend");this.addScrollBar("horizontal","append")},assignViewPort:function(){this.$viewPort=this.$element.find(".viewport")},assignOverview:function(){this.$overview=this.$viewPort.find(".overview")},addScrollBar:function(e,t){if(this.$element.find(".scroll-bar."+e).length==0)this.$element[t]("<div class='scroll-bar "+e+"'><div class='thumb'></div></div>")},resize:function(){if(this.vScrollbar)this.vScrollbar.resize();if(this.hScrollbar)this.hScrollbar.resize()},scrollTo:function(e){if(this.vScrollbar)this.vScrollbar.scrollToElement(e);if(this.hScrollbar)this.hScrollbar.scrollToElement(e)},scrollToXY:function(e,t){this.scrollToX(e);this.scrollToY(t)},scrollToX:function(e){if(this.hScrollbar)this.hScrollbar.scrollTo(e)},scrollToY:function(e){if(this.vScrollbar)this.vScrollbar.scrollTo(e)},isInside:function(t,n){var r=e(t);var i=e(n);var s=r.offset();var o=i.offset();return s.top>=o.top&&s.left>=o.left&&s.top+r.height()<=o.top+i.height()&&s.left+r.width()<=o.left+i.width()},addNested:function(e){if(this.addNestedToOneFromList(this.nestedScrollbars,e))return true;else if(this.isInside(e.$viewPort,this.$overview)){this.nestedScrollbars.push(e);return true}else return false},addToScrollbarsHierarchy:function(){this.nestedScrollbars=[];if(!this.addNestedToOneFromList(this,window.jQueryCustomScrollbars))window.jQueryCustomScrollbars.push(this)},addNestedToOneFromList:function(e,t){for(var n=0;n<t.length;n++){if(t[n].addNested(e))return true;else if(e.addNested(t[n])){t[n]=e;return true}}return false},isMouseOver:function(){for(var e=0;e<this.nestedScrollbars.length;e++)if(this.nestedScrollbars[e].isMouseOver())return false;var t=this.$element.offset();var n=this.$element.width();var r=this.$element.height();return this.lastMouseEvent&&this.lastMouseEvent.pageX>=t.left&&this.lastMouseEvent.pageX<=t.left+n&&this.lastMouseEvent.pageY>=t.top&&this.lastMouseEvent.pageY<=t.top+r},initKeyboardScrolling:function(){var t=this;e(document).keydown(function(e){if(t.isMouseOver()){if(t.vScrollbar)t.vScrollbar.keyScroll(e);if(t.hScrollbar)t.hScrollbar.keyScroll(e)}});e(document).mousemove(function(e){t.lastMouseEvent=e})},bindEvents:function(){if(this.options.onCustomScroll)this.$element.on("customScroll",this.options.onCustomScroll)}};var s=function(e,t){this.scrollable=e;this.sizing=t;this.$scrollBar=this.sizing.scrollBar(this.scrollable.$element);this.$thumb=this.$scrollBar.find(".thumb");this.setScrollPosition(0,0);this.resize();this.initMouseMoveScrolling();this.initMouseWheelScrolling();this.initTouchScrolling();this.initMouseClickScrolling();this.initWindowResize()};s.prototype={resize:function(){this.scrollable.$viewPort.height(this.scrollable.$element.height());this.sizing.size(this.scrollable.$viewPort,this.sizing.size(this.scrollable.$element));this.viewPortSize=this.sizing.size(this.scrollable.$viewPort);this.overviewSize=this.sizing.size(this.scrollable.$overview);this.ratio=this.viewPortSize/this.overviewSize;this.sizing.size(this.$scrollBar,this.viewPortSize);this.thumbSize=Math.round(this.ratio*this.viewPortSize);this.sizing.size(this.$thumb,this.thumbSize);this.maxThumbPosition=this.calculateMaxThumbPosition();this.maxOverviewPosition=this.calculateMaxOverviewPosition();this.enabled=this.overviewSize>this.viewPortSize;if(this.scrollPercent===undefined)this.scrollPercent=0;if(this.enabled)this.rescroll();else this.setScrollPosition(0,0);this.$scrollBar.toggle(this.enabled)},initMouseMoveScrolling:function(){var t=this;this.$thumb.mousedown(function(e){if(t.enabled)t.startMouseMoveScrolling(e)});e(document).mouseup(function(e){t.stopMouseMoveScrolling(e)});e(document).mousemove(function(e){t.mouseMoveScroll(e)});this.$thumb.click(function(e){e.stopPropagation()})},initMouseWheelScrolling:function(){var e=this;this.scrollable.$element.mousewheel(function(t,n,r,i){if(e.enabled){e.mouseWheelScroll(r,i);t.preventDefault();t.stopPropagation()}})},initTouchScrolling:function(){if(document.addEventListener){var e=this;this.scrollable.$element[0].addEventListener("touchstart",function(t){if(e.enabled)e.startTouchScrolling(t)});document.addEventListener("touchmove",function(t){e.touchScroll(t)});this.scrollable.$element[0].addEventListener("touchend",function(t){e.stopTouchScrolling(t)})}},initMouseClickScrolling:function(){var e=this;this.$scrollBar.click(function(t){e.mouseClickScroll(t)})},initWindowResize:function(){if(this.scrollable.options.updateOnWindowResize){var t=this;e(window).resize(function(){t.resize()})}},isKeyScrolling:function(e){return this.keyScrollDelta(e)!=null},keyScrollDelta:function(e){for(var t in this.sizing.scrollingKeys)if(t==e)return this.sizing.scrollingKeys[e](this.viewPortSize);return null},startMouseMoveScrolling:function(t){this.mouseMoveScrolling=true;e("html").addClass("not-selectable");this.setUnselectable(e("html"),"on");this.setScrollEvent(t)},stopMouseMoveScrolling:function(t){this.mouseMoveScrolling=false;e("html").removeClass("not-selectable");this.setUnselectable(e("html"),null)},setUnselectable:function(e,t){if(e.attr("unselectable")!=t){e.attr("unselectable",t);e.find(":not(input)").attr("unselectable",t)}},mouseMoveScroll:function(e){if(this.mouseMoveScrolling)this.moveScroll(e,1)},moveScroll:function(e,t){var n=this.sizing.mouseDelta(this.scrollEvent,e)*t;this.scrollBy(Math.round(n*this.overviewSize/this.viewPortSize));this.setScrollEvent(e)},startTouchScrolling:function(e){if(e.touches&&e.touches.length>0){this.setScrollEvent(e.touches[0]);this.touchScrolling=true}},touchScroll:function(e){if(this.touchScrolling&&e.touches&&e.touches.length>0){this.moveScroll(e.touches[0],-1);e.preventDefault()}},stopTouchScrolling:function(e){this.touchScrolling=false},mouseWheelScroll:function(e,t){var n=this.sizing.wheelDelta(e,t)*-20;if(n!=0)this.scrollBy(n)},mouseClickScroll:function(e){var t=this.viewPortSize-20;if(e["page"+this.sizing.scrollAxis()]<this.$thumb.offset()[this.sizing.offsetComponent()])t=-t;this.scrollBy(t)},keyScroll:function(e){var t=e.which;if(this.enabled&&this.isKeyScrolling(t)){this.scrollBy(this.keyScrollDelta(t));e.preventDefault()}},scrollBy:function(e){var t=-this.scrollable.$overview.position()[this.sizing.offsetComponent()];t+=e;this.scrollTo(t)},scrollTo:function(e){if(e<0)e=0;if(e>this.maxOverviewPosition)e=this.maxOverviewPosition;var t=this.scrollPercent;this.scrollPercent=e/this.maxOverviewPosition;var n=this.scrollPercent*this.maxThumbPosition;this.setScrollPosition(e,n);if(t!=this.scrollPercent)this.triggerCustomScroll(t)},triggerCustomScroll:function(e){this.scrollable.$element.trigger("customScroll",{scrollAxis:this.sizing.scrollAxis(),direction:this.sizing.scrollDirection(e,this.scrollPercent),scrollPercent:Math.round(this.scrollPercent*100)})},rescroll:function(){var e=this.scrollPercent*this.maxThumbPosition;var t=this.scrollPercent*this.maxOverviewPosition;this.setScrollPosition(t,e)},setScrollPosition:function(e,t){this.$thumb.css(this.sizing.offsetComponent(),t+"px");this.scrollable.$overview.css(this.sizing.offsetComponent(),-e+"px")},calculateMaxThumbPosition:function(){return this.sizing.size(this.$scrollBar)-this.thumbSize},calculateMaxOverviewPosition:function(){return this.sizing.size(this.scrollable.$overview)-this.sizing.size(this.scrollable.$viewPort)},setScrollEvent:function(e){var t="page"+this.sizing.scrollAxis();if(!this.scrollEvent||this.scrollEvent[t]!=e[t])this.scrollEvent={pageX:e.pageX,pageY:e.pageY}},scrollToElement:function(e){var t=e;if(this.sizing.isInside(t,this.scrollable.$overview)&&!this.sizing.isInside(t,this.scrollable.$viewPort)){var n=t.offset();var r=this.scrollable.$overview.offset();var i=this.scrollable.$viewPort.offset();var s;if(n[this.sizing.offsetComponent()]<i[this.sizing.offsetComponent()])s=n[this.sizing.offsetComponent()]-r[this.sizing.offsetComponent()];else s=n[this.sizing.offsetComponent()]-r[this.sizing.offsetComponent()]+this.sizing.size(t)-this.sizing.size(this.scrollable.$viewPort);this.scrollTo(s)}}};var o=function(){};o.prototype={size:function(e,t){if(t)return e.width(t);else return e.width()},scrollBar:function(e){return e.find(".scroll-bar.horizontal")},mouseDelta:function(e,t){return t.pageX-e.pageX},offsetComponent:function(){return"left"},wheelDelta:function(e,t){return e},scrollAxis:function(){return"X"},scrollDirection:function(e,t){return e<t?"right":"left"},scrollingKeys:{37:function(e){return-10},39:function(e){return 10}},isInside:function(t,n){var r=e(t);var i=e(n);var s=r.offset();var o=i.offset();return s.left>=o.left&&s.left+r.width()<=o.left+i.width()}};var u=function(){};u.prototype={size:function(e,t){if(t)return e.height(t);else return e.height()},scrollBar:function(e){return e.find(".scroll-bar.vertical")},mouseDelta:function(e,t){return t.pageY-e.pageY},offsetComponent:function(){return"top"},wheelDelta:function(e,t){return t},scrollAxis:function(){return"Y"},scrollDirection:function(e,t){return e<t?"down":"up"},scrollingKeys:{38:function(e){return-10},40:function(e){return 10},33:function(e){return-(e-20)},34:function(e){return e-20}},isInside:function(t,n){var r=e(t);var i=e(n);var s=r.offset();var o=i.offset();return s.top>=o.top&&s.top+r.height()<=o.top+i.height()}};return this.each(function(){if(t==undefined)t=r;if(typeof t=="string"){var s=e(this).data("scrollable");if(s)s[t](n)}else if(typeof t=="object"){t=e.extend(r,t);new i(e(this),t)}else throw"Invalid type of options"})}})(jQuery);(function(e){function r(t){var n=t||window.event,r=[].slice.call(arguments,1),i=0,s=true,o=0,u=0;t=e.event.fix(n);t.type="mousewheel";if(n.wheelDelta){i=n.wheelDelta/120}if(n.detail){i=-n.detail/3}u=i;if(n.axis!==undefined&&n.axis===n.HORIZONTAL_AXIS){u=0;o=-1*i}if(n.wheelDeltaY!==undefined){u=n.wheelDeltaY/120}if(n.wheelDeltaX!==undefined){o=-1*n.wheelDeltaX/120}r.unshift(t,i,o,u);return(e.event.dispatch||e.event.handle).apply(this,r)}var t=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks){for(var n=t.length;n;){e.event.fixHooks[t[--n]]=e.event.mouseHooks}}e.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var e=t.length;e;){this.addEventListener(t[--e],r,false)}}else{this.onmousewheel=r}},teardown:function(){if(this.removeEventListener){for(var e=t.length;e;){this.removeEventListener(t[--e],r,false)}}else{this.onmousewheel=null}}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})(jQuery)